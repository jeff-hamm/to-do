/* Optimized Stylesheet
   This file is an extracted & deduplicated subset of styles from styles.css.
   It relies on variables defined in default-theme.css.
   Original file (styles.css) is preserved; this is a lean runtime layer.
*/
@import './default-theme.css';

/* === BASE RESET / STRUCTURE === */
* { box-sizing: border-box; }
body {
  background: var(--color-bg);
  color: var(--color-text);
  margin: 0;
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
}

.todo-container { max-width: 800px; margin: 0 auto; padding: var(--spacing-md); }
.section { margin-bottom: var(--spacing-xl); }

h1,h2,h3,h4,h5,h6 { margin:0; font-weight: var(--font-weight-bold); line-height: var(--line-height-tight); }
h1 { font-size: var(--font-size-heading-main); color: var(--color-primary); }
h2 { font-size: var(--font-size-heading-section); color: var(--color-primary); border-bottom:2px solid var(--color-primary); padding-bottom:.5rem; margin-bottom:1rem; font-weight:600; }

/* === TASK ITEM === */
.todo-item {
  background: var(--color-bg-alt);
  border: var(--border-width) solid var(--border-color);
  border-radius: var(--border-radius);
  padding: 0 var(--task-item-padding) var(--spacing-lg) var(--task-item-padding);
  margin:0 0 var(--task-item-gap) 0;
  position:relative;
  transition: border-color var(--transition-normal), transform var(--transition-fast);
}
.todo-item:hover { border-color: var(--color-primary); }
.todo-completed .todo-text { text-decoration: line-through; opacity:.6; }

.todo-text-row { display:flex; align-items:center; gap:12px; width:100%; min-height:60px; }
.todo-left-column { display:flex; flex-direction:column; align-items:center; justify-content:center; width:40px; flex-shrink:0; }
.todo-right-column { display:flex; align-items:center; gap:var(--spacing-sm); flex:1; }
.todo-text { flex:1; margin:0; }
.todo-text h3 { margin:0; color:var(--color-primary); font-size: var(--font-size-heading-main); font-weight: var(--font-weight-bold); line-height: var(--line-height-normal); }

/* === CHECKBOX === */
.todo-checkbox { width:20px; height:20px; accent-color: var(--color-primary); cursor:pointer; }
.todo-checkbox:hover { opacity:.8; }

/* === PRIORITY CORNER === */
.priority-right-section { display:flex; flex-direction:column; align-items:center; gap:2px; flex-shrink:0; padding:2px 4px; border-radius:4px; cursor:pointer; transition:background-color .2s; }
.priority-right-section:hover { background:rgba(255,105,180,.2); }
.priority-top-icon { display:flex; align-items:center; justify-content:center; font-size: var(--font-size-icon-large); }
.priority-text-label { font-size: var(--font-size-text-small); color: var(--color-text-muted); text-align:center; line-height:1; padding:1px 2px; border-radius:2px; transition:color .2s; }
.priority-text-label.empty-field { font-style:italic; }

/* === DETAIL VIEW === */
.task-details { display:flex; align-items:flex-start; gap:var(--spacing-sm); font-size: var(--font-size-text-medium); color: var(--color-text-light); margin-top:var(--spacing-sm); line-height:1.4; width:100%; }
.detail-item { margin:4px 0; display:flex; align-items:flex-start; gap:6px; font-size: var(--font-size-text-large); }
.detail-label { font-weight:600; color:var(--color-white); min-width:calc(11ch + 20px); flex-shrink:0; word-break:break-all; }
.detail-value { color:var(--color-text-muted); flex:1; }

/* === FILTERS / CONTROLS === */
.filter-buttons { display:flex; flex-wrap:wrap; gap:var(--spacing-sm); margin:var(--spacing-lg) 0; padding:var(--spacing-md); background:var(--color-bg-alt); border:var(--border-width) solid var(--border-color); border-radius:var(--border-radius); }
.filter-btn { background: var(--color-gray4); color:var(--color-text); border:1px solid var(--color-primary); padding:var(--spacing-sm) var(--spacing-md); border-radius:var(--border-radius-sm); cursor:pointer; font-size:var(--font-size-text-small); font-weight:var(--font-weight-medium); transition:all var(--transition-normal); }
.filter-btn:hover, .filter-btn.active { background: var(--color-primary); color:var(--color-white); }
.filter-btn.active:hover { background: var(--color-primary-hover); }

/* === PROGRESS BAR === */
#progress-bar { background: var(--color-bg-elevated); border-radius: var(--progress-border-radius); height: var(--progress-height); margin: var(--spacing-sm) 0; overflow:hidden; }
#progress-fill { background: var(--color-primary); height:100%; width:0; transition:width var(--transition-normal); border-radius:var(--progress-border-radius); }

/* === SYNC STATUS / ADD BUTTON === */
.sync-status { position:fixed; top:20px; right:20px; background:rgba(33,38,45,0.1); border:1px solid rgba(48,54,61,0.3); border-radius:6px; padding:8px 12px; font-size:var(--font-size-micro-tiny); color:var(--color-primary); z-index:100; display:flex; flex-direction:column; align-items:center; gap:4px; width:fit-content; opacity:0; visibility:hidden; transition:all .3s; }
.sync-status.visible { opacity:1; visibility:visible; }
.floating-add-btn { background: var(--color-gray4); color: var(--color-text); border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-size: var(--font-size-micro-tiny); font-weight:500; transition:all .3s; white-space:nowrap; }
.floating-add-btn:hover { background:rgba(255,105,180,.1); outline:1px solid rgba(255,105,180,.3); transform:translateY(-1px); }
.floating-add-btn.modal-open { background: var(--color-pink); color: var(--color-bg); }
.floating-add-btn.modal-open:hover { background: var(--color-pink-light); }

/* === MODAL + FORM === */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,var(--modal-backdrop-opacity)); z-index:var(--z-modal-backdrop); opacity:0; transition:opacity var(--transition-normal); }
.modal-backdrop.show { opacity:1; }
.add-task-form { position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(.9); background: var(--color-bg); border: var(--border-width) solid var(--border-color); border-radius: var(--border-radius-lg); padding: var(--spacing-xl); z-index: var(--z-modal); width:90%; max-width: var(--modal-max-width); max-height:90vh; overflow-y:auto; box-shadow: var(--shadow-xl); transition: all var(--transition-normal); opacity:0; }
.add-task-form { max-width: 640px; }
.add-task-form.show { transform:translate(-50%,-50%) scale(1); opacity:1; }
.add-task-form h3 { margin:0 0 var(--spacing-lg) 0; color:var(--color-primary); font-size: var(--font-size-heading-section); }
/* === FORM LAYOUT (Restored legacy spacing fidelity) === */
/* Legacy had larger vertical rhythm via margin-bottom: var(--spacing-lg) on .form-row */
.form-row { display:flex; gap:var(--spacing-md); margin-bottom:var(--spacing-lg); }
/* On mobile we still override gap to smaller value later in responsive block */
/* Legacy .form-group used flex column + gap instead of label margin */
.form-group { flex:1; min-width:0; display:flex; flex-direction:column; gap: var(--spacing-sm); }
.form-group label { font-weight: var(--font-weight-medium); font-size: var(--font-size-text-small); color: var(--color-text-light); }
/* Input padding in legacy was uniform: var(--spacing-md); keep variables but fallback */
.form-group input, .form-group select, .form-group textarea { background: var(--color-bg); color: var(--color-text); font-size: var(--font-size-form); padding: var(--spacing-md); border: var(--border-width) solid var(--border-color); border-radius: var(--border-radius); transition: border-color var(--transition-fast), box-shadow var(--transition-fast); }
.form-group textarea { min-height: 120px; line-height: var(--line-height-normal); }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline:none; border-color: var(--border-color-focus); box-shadow:0 0 0 3px rgba(255,105,180,0.12); }
/* Actions row (missing previously) */
.form-actions { display:flex; gap: var(--spacing-md); justify-content:flex-end; margin-top: var(--spacing-xl); }
/* === BUTTONS (restored) === */
.btn { display:inline-flex; align-items:center; justify-content:center; gap: var(--spacing-sm); height: var(--button-height); padding: var(--button-padding-y) var(--button-padding-x); font-size: var(--font-size-base); font-weight: var(--font-weight-medium); border: var(--border-width) solid transparent; border-radius: var(--border-radius); cursor:pointer; transition: all var(--transition-fast); text-decoration:none; background:none; }
.btn-primary { background: var(--color-primary); color: var(--color-white); border-color: var(--color-primary); }
.btn-primary:hover { background: var(--color-primary-dark); border-color: var(--color-primary-dark); transform:translateY(-1px); }
.btn-secondary { background: var(--color-bg-alt); color: var(--color-text); border-color: var(--border-color); }
.btn-secondary:hover { background: var(--color-bg-elevated); border-color: var(--border-color-light); }
.btn-ghost { background:transparent; color: var(--color-text-muted); border-color:transparent; }
.btn-ghost:hover { background: var(--color-bg-alt); color: var(--color-text); }
/* Ensure form action buttons inherit base button styling */
.form-actions .btn-primary, .form-actions .btn-secondary { min-width:120px; }

/* === SHEET LINK (restored) === */
.sheet-link { color: var(--color-primary); text-decoration:none; font-weight: var(--font-weight-medium); font-size: var(--font-size-text-small); transition: color var(--transition-fast); }
.sheet-link:hover { color: var(--color-primary-hover); }

/* === MULTISELECT DROPDOWNS === */
.editable-dropdown { background: var(--color-bg-alt); color: var(--color-text); border:1px solid var(--color-border-pink); border-radius:4px; padding:4px 8px; font-size: var(--font-size-form); width:100%; transition: border-color var(--transition-fast), background-color var(--transition-fast); }
.helper-dropdown { color: var(--color-text-light); background: var(--color-bg-elevated); border:1px solid var(--color-border-pink); border-radius:4px; padding:.25rem .5rem; margin-bottom:.5rem; width:100%; }
.editing-dropdown { background: linear-gradient(145deg,var(--color-bg-alt) 0%, var(--color-bg-secondary) 100%); border:1px solid var(--color-primary); box-shadow: var(--editing-dropdown-focus-shadow); }
.editing-dropdown:focus { box-shadow: var(--editing-dropdown-focus-shadow-strong); outline:none; }

/* === LOADING / STATES === */
.loading { text-align:center; padding: var(--spacing-xl); color: var(--color-text-muted); font-style:italic; }
.error { background: rgba(218,54,51,0.1); border: var(--border-width) solid var(--color-error); border-radius: var(--border-radius); padding: var(--spacing-md); margin: var(--spacing-md) 0; color: var(--color-error); font-size: var(--font-size-text-small); }
.offline-notice { background: rgba(247,147,30,0.1); border: var(--border-width) solid var(--color-warning); border-radius: var(--border-radius); padding: var(--spacing-md); margin: var(--spacing-md) 0; color: var(--color-warning); font-size: var(--font-size-text-small); text-align:center; }

/* === CATEGORY LEFT BORDERS === */
.category-medical { border-left:4px solid var(--category-medical); }
.category-home { border-left:4px solid var(--category-home); }
.category-equipment { border-left:4px solid var(--category-equipment); }
.category-administrative { border-left:4px solid var(--category-administrative); }
.category-transportation { border-left:4px solid var(--category-transportation); }
.category-shopping { border-left:4px solid var(--category-shopping); }
.category-technology { border-left:4px solid var(--category-technology); }
.category-supplies { border-left:4px solid var(--category-supplies); }
.category-personal { border-left:4px solid var(--category-personal); }
.category-recovery { border-left:4px solid var(--category-recovery); }
.category-daily { border-left:4px solid var(--category-daily); }
.category-projects { border-left:4px solid var(--category-projects); }
.category-emergency { border-left:4px solid var(--category-emergency); }
.category-activity { border-left:4px solid var(--category-activity); }

/* === RESPONSIVE === */
@media (max-width:768px){
  .form-row { flex-direction:column; gap:var(--spacing-sm); margin-bottom: var(--spacing-md); }
  .add-task-form { padding: var(--spacing-lg); width:95%; }
  .form-actions { flex-direction:column-reverse; }
}
@media (max-width:480px){
  .floating-add-btn { width:52px; height:52px; border-radius:var(--border-radius-full); font-size: var(--font-size-2xl); font-weight: var(--font-weight-bold); padding:0; display:flex; align-items:center; justify-content:center; box-shadow: var(--shadow-primary); }
  .floating-add-btn .btn-text-full { display:none; }
  .floating-add-btn .btn-text-mobile { display:inline; }
}

/* === RESTORED: PRIORITY CORNER SECTION === */
.priority-corner-section { position:absolute; bottom:var(--spacing-sm); right:var(--spacing-sm); z-index:10; text-align:right; line-height:1.2; }
.top-right-value { font-size: var(--font-size-text-small); padding:2px 6px; border-radius: var(--border-radius-sm); display:inline-block; margin-bottom:2px; }
.top-right-value .edit-icon { font-size: var(--font-size-icon-small); margin-left:2px; }

/* === RESTORED: ADD FORM MULTI-SELECT (original who-can-help) === */
#who-can-help-container { display:flex; flex-direction:column; gap: var(--spacing-md); }
.who-can-help-select { flex:1; height: var(--input-height); padding: var(--input-padding-y) var(--input-padding-x); border: var(--border-width) solid var(--border-color); border-radius: var(--border-radius); background: var(--color-bg-alt); color: var(--color-text); font-size: var(--font-size-form); transition: border-color var(--transition-fast), box-shadow var(--transition-fast); }
.who-can-help-select:focus { outline:none; border-color: var(--border-color-focus); box-shadow:0 0 0 3px rgba(255,105,180,0.1); }

/* === RESTORED: DATE TOGGLE CONTROLS === */
.date-type-toggle { display:flex; gap: var(--spacing-xs); margin-top: var(--spacing-xs); }
.date-toggle-btn { display:inline-flex; align-items:center; justify-content:center; height:28px; padding: var(--spacing-xs) var(--spacing-sm); font-size: var(--font-size-text-small); font-weight: var(--font-weight-medium); border: var(--border-width) solid transparent; border-radius: var(--border-radius); cursor:pointer; transition: all var(--transition-fast); background:transparent; color: var(--color-text-muted); }
.date-toggle-btn.active { background: var(--color-primary); color: var(--color-white); }

/* === RESTORED: AUDIO UPLOAD BLOCK === */
.audio-upload-container { display:flex; flex-direction:column; gap: var(--spacing-sm); }
.audio-upload-display { display:flex; align-items:center; gap: var(--spacing-sm); }
.audio-upload-btn { display:inline-flex; align-items:center; justify-content:center; height:32px; padding: var(--spacing-xs) var(--spacing-md); font-size: var(--font-size-text-small); font-weight: var(--font-weight-medium); border: var(--border-width) solid var(--border-color); border-radius: var(--border-radius); cursor:pointer; transition: all var(--transition-fast); background: var(--color-bg-alt); color: var(--color-text); }
.audio-upload-btn:hover { background: var(--color-bg-elevated); border-color: var(--border-color-light); }
.audio-filename { font-size: var(--font-size-text-small); color: var(--color-text-muted); }
.audio-drive-link { display:flex; flex-direction:column; gap: var(--spacing-xs); }
.drive-folder-link { color: var(--color-primary); text-decoration:none; font-size: var(--font-size-text-small); }
.drive-folder-link:hover { text-decoration:underline; }
.audio-help-text { font-size: var(--font-size-text-small); color: var(--color-text-muted); line-height: var(--line-height-normal); }
.audio-url-input { margin-top: var(--spacing-xs); }

/* === RESTORED: LOADING OVERLAY & SPINNER === */
.add-task-loading-overlay { position:absolute; inset:0; background:rgba(0,0,0,.7); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; border-radius: var(--border-radius-lg); }
.spinner { width:40px; height:40px; border:4px solid var(--color-gray-dark); border-top:4px solid var(--color-primary); border-radius: var(--border-radius-full); animation: spin 1s linear infinite; }
@keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
.spinner-text { margin-top: var(--spacing-md); color: var(--color-text); font-size: var(--font-size-text-small); }

/* === RESTORED: EDITABLE TEXT INLINE CONTROLS === */
.editable-text { position:relative; cursor:pointer; transition: background-color var(--transition-fast); padding:2px 4px; border-radius:3px; }
.editable-text:hover { background:rgba(255,105,180,0.1); }
.edit-icon { opacity:0; margin-left: var(--spacing-xs); font-size: var(--font-size-icon-small); transition:opacity var(--transition-fast); }
.editable-text:hover .edit-icon { opacity:1; }
.clear-icon { opacity:0; margin-left: var(--spacing-xs); font-size: var(--font-size-icon-small); color: var(--color-text-muted); cursor:pointer; transition:opacity var(--transition-fast); }
.editable-text:hover .clear-icon { opacity:1; }
.clear-icon:hover { color: var(--color-error); }
.empty-field { color: var(--color-text-muted); font-style:italic; }
